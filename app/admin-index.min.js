var adminIndexModule=angular.module("adminIndex",["ngRoute"]);adminIndexModule.config(["$routeProvider",function(n){n.when("/",{redirectTo:"/portfolio/0/e-commerce"}).when("/portfolio/:page/:category",{controller:"portfoliosController",templateUrl:"/templates/admin/portfolioView.html"});n.when("/newportfolio",{controller:"newPortfolioController",templateUrl:"/templates/admin/newPortfolioView.html"});n.otherwise({redirectTo:"/"})}]);adminIndexModule.factory("dataService",["$http","$q",function(n,t){var i=[],r=!1,u=function(){return r},f=function(u,f){var e=t.defer();return n.get("/api/adminapi?page="+u+"&category="+f).then(function(n){angular.copy(n.data,i);r=!0;e.resolve()},function(){e.reject()}),e.promise},e=function(r){var u=t.defer();return n.post("/api/adminapi",r).then(function(n){var t=n.data;i.portfolios.splice(0,0,t);u.resolve(t)},function(){u.reject()}),u.promise},o=function(i,r){var u=t.defer();return n.put("/api/adminapi/"+i,r).success(function(){alert("saved successfully");u.resolve(r)}).error(function(){alert("Something went wrong!");u.reject()}),u.promise};return{paginatedPortfolio:i,getPortfolios:f,isReady:u,addPortfolio:e,updatePortfolio:o}}]);adminIndexModule.controller("portfoliosController",["$scope","$http","dataService","$routeParams",function(n,t,i,r){n.data=i;n.isBusy=!1;i.getPortfolios(r.page,r.category).then(function(){},function(){alert("could not load portfolios")}).then(function(){n.isBusy=!1});n.editMode=!1;n.toggleEdit=function(t){n.editMode=t};n.update=function(t){i.updatePortfolio(t.ID,t);n.editMode=!1}}]);adminIndexModule.controller("newPortfolioController",["$scope","$http","$window","dataService","fileUpload",function(n,t,i,r,u){n.newPortfolio={};n.save=function(){r.addPortfolio(n.newPortfolio).then(function(){i.location="#/"},function(){alert("could not save the new portfolio")})};n.uploadImage=function(){var t=n.myFile;u.uploadFileToUrl(t,"/api/v1/portfolios/PostImageUpload")}}]);adminIndexModule.filter("range",[function(){return function(n,t){t=parseInt(t);for(var i=1;i<=t;i++)n.push(i);return n}}]);adminIndexModule.directive("fileModel",["$parse",function(n){return{restrict:"A",link:function(t,i,r){var u=n(r.fileModel),f=u.assign;i.bind("change",function(){t.$apply(function(){f(t,i[0].files[0])})})}}}]);adminIndexModule.service("fileUpload",["$http",function(n){this.uploadFileToUrl=function(t,i){var r=new FormData;r.append("file",t);n.post(i,r,{transformRequest:angular.identity,headers:{"Content-Type":undefined}}).success(function(){}).error(function(){})}}]);
/*
//# sourceMappingURL=admin-index.min.js.map
*/