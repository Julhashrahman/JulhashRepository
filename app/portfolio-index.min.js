var portfolioIndexModule=angular.module("portfolioIndex",["ngRoute","ngAnimate","cfp.loadingBarInterceptor","angular-loading-bar","bootstrapLightbox"]);portfolioIndexModule.config(["$routeProvider",function(n){n.when("/",{redirectTo:"/portfolio/All/0"}).when("/portfolio",{redirectTo:"/portfolio/All/0"}).when("/portfolio/:category/:page",{controller:"portfoliosController",templateUrl:"/templates/portfolio/portfolioView.html"});n.when("/newportfolio",{controller:"newPortfolioController",templateUrl:"/templates/portfolio/newPortfolioView.html"});n.otherwise({redirectTo:"/"})}]);portfolioIndexModule.factory("dataService",["$http","$q",function(n,t){var i=[],r=!1,u=function(){return r},f=function(u){var f=t.defer();return n({method:"Get",url:"/api/v1/portfolios/GetPortfolios",params:u}).then(function(n){console.log(n);angular.copy(n.data,i);console.log(i);r=!0;f.resolve()},function(){f.reject()}),f.promise},e=function(i){var r=t.defer();return n.post("/api/v1/portfolios",i).then(function(n){var t=n.data;_paginatedPortfolio.portfolios.splice(0,0,t);r.resolve(t)},function(){r.reject()}),r.promise},o=function(i,r){var u=t.defer();return n.put("/api/v1/portfolios/"+i,r).success(function(){alert("saved successfully");u.resolve(r)}).error(function(){alert("Something went wrong!");u.reject()}),u.promise};return{portfolioViewModel:i,getPortfolios:f,isReady:u,addPortfolio:e,updatePortfolio:o}}]);portfolioIndexModule.controller("portfoliosController",["$scope","$http","dataService","$routeParams","Lightbox",function(n,t,i,r,u){n.data=i;n.portfolio={};n.showProject=!1;n.togglePrject=function(t){n.portfolio=t;console.log(n.project);n.showProject=!n.showProject};n.isBusy=!1;n.slideDown=function(n){n.className="slide-up"};n.slideUp=function(n){n.className="slide-down"};n.searchCriteria={SelectedCategory:r.category||"All",PageIndex:r.page||0,PageSize:"2"};n.isBusy=!0;i.getPortfolios(n.searchCriteria).then(function(){},function(){alert("could not load portfolios")}).then(function(){n.isBusy=!1});n.editMode=!1;n.toggleEdit=function(t){n.editMode=t};n.update=function(t){i.updatePortfolio(t.ID,t);n.editMode=!1};n.openLightboxModal=function(n,t){u.openModal(n,t)}}]);portfolioIndexModule.controller("newPortfolioController",["$scope","$http","$window","dataService","fileUpload",function(n,t,i,r,u){n.newPortfolio={};n.save=function(){r.addPortfolio(n.newPortfolio).then(function(){i.location="#/"},function(){alert("could not save the new portfolio")})};n.uploadImage=function(){var t=n.myFile;u.uploadFileToUrl(t,"/api/v1/portfolios/PostImageUpload")}}]);portfolioIndexModule.filter("range",[function(){return function(n,t){t=parseInt(t);for(var i=1;i<=t;i++)n.push(i);return n}}]);portfolioIndexModule.directive("fileModel",["$parse",function(n){return{restrict:"A",link:function(t,i,r){var u=n(r.fileModel),f=u.assign;i.bind("change",function(){t.$apply(function(){f(t,i[0].files[0])})})}}}]);portfolioIndexModule.service("fileUpload",["$http",function(n){this.uploadFileToUrl=function(t,i){var r=new FormData;r.append("file",t);n.post(i,r,{transformRequest:angular.identity,headers:{"Content-Type":undefined}}).success(function(){}).error(function(){})}}]);
/*
//# sourceMappingURL=portfolio-index.min.js.map
*/